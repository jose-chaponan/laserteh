!function(N){var L,J,I,H,F,E,D,C,M={backgroundColor:"#000",backgroundImage:"",backgroundRepeat:"repeat",logoImage:"",progressShow:!0,progressColor:"#FFF",progressHeight:"10px",progressPosition:"bottom",percentShow:!0,percentFontFamily:"Verdana, Geneva, sans-serif",percentFontSize:"50px",animationComplete:"fade",minimumTime:0.5,onStart:function(){},onComplete:function(){}},K=[],G=0;N.fn.lsPreloader=function(a){return L=this,a&&N.extend(M,a),this.find("*").each(function(){B(this)}),A(),this};var B=function(a){var d="";if("none"!=N(a).css("background-image")){var d=N(a).css("background-image").replace("url(","").replace(")","")}else{if("undefined"!=typeof N(a).attr("src")&&"img"==a.nodeName.toLowerCase()){var d=N(a).attr("src")}}""!=d&&K.push(d)},A=function(){var b=new Date;J=b.getTime(),""!=K?(z(),y(),M.onStart()):M.onComplete()},z=function(){if(L.css({overflow:"hidden"}),F=N('<div id="preloader-overlay"></div>').appendTo(L).css({width:L.width(),height:L.height(),backgroundColor:M.backgroundColor,backgroundImage:"url("+M.backgroundImage+")",backgroundRepeat:M.backgroundRepeat,backgroundPosition:"fixed",position:"fixed",zIndex:999999,top:L.offset().top,left:L.offset().left}),M.progressShow){switch(E=N('<div id="preloader-bar-progress"></div>').appendTo(F).css({width:"0%",height:M.progressHeight,backgroundColor:M.progressColor,position:"absolute",left:0}),M.progressPosition){case"top":E.css({top:0,marginTop:0});break;case"center":E.css({top:"50%",marginTop:"-"+parseFloat(M.progressHeight)/2+"px"});break;case"bottom":E.css({bottom:0,marginBottom:0})}}M.percentShow&&(D=N('<div id="preloader-percent-progress"></div>').appendTo(F).css({width:"200px",height:M.percentFontSize,position:"absolute",top:"50%",left:"50%",marginTop:parseFloat(M.progressHeight)/2+15+"px",marginLeft:"-100px",fontFamily:"Verdana, Geneva, sans-serif",fontSize:M.percentFontSize,fontWeight:"bold",color:M.progressColor,textAlign:"center",lineHeight:M.percentFontSize}).html("0%")),""!=M.logoImage&&(C=N('<div id="preloader-logo-image"></div>').appendTo(F).css({width:"100%",height:"100%",position:"absolute",bottom:"50%",left:"0",marginBottom:parseFloat(M.progressHeight)/2+20+"px",backgroundImage:"url("+M.logoImage+")",backgroundPosition:"center bottom",backgroundRepeat:"no-repeat"}))},y=function(){H=N("<div></div>").appendTo(L).css({display:"none",overflow:"hidden",width:0,height:0});for(var a=0;a<K.length;a++){var c=new Image;N(c).one({load:function(){x()},error:function(){x()}}).attr("src",K[a]).appendTo(H)}},x=function(){G++;var b=100*(G/K.length);M.progressShow&&E.stop().animate({width:b+"%",minWidth:b+"%"},400),M.percentShow&&D.text(Math.ceil(b)+"%"),G==K.length&&w()},w=function(){H.remove(),v()},v=function(){I=1000*M.minimumTime;var b=new Date;switch(b.getTime()-J<I&&(I-=b.getTime()-J),M.animationComplete){case"fade":F.delay(I).fadeOut(500,function(){i()});break;case"hide":F.delay(I).hide(0,function(){i()});break;case"slideUp":F.delay(I).css({position:"absolute"}).animate({top:"-=100%"},500,function(){i()});break;case"slideDown":F.delay(I).css({position:"absolute"}).animate({top:"+=100%"},500,function(){i()});break;case"slideLeft":F.delay(I).css({position:"absolute"}).animate({left:"-=100%"},500,function(){i()});break;case"slideRight":F.delay(I).css({position:"absolute"}).animate({left:"+=100%"},500,function(){i()})}},i=function(){N(L).removeAttr("style"),F.remove(),M.onComplete()}}(jQuery);
